groups:
  - name: metro_alerts
    rules:
      - alert: HighDelay
        expr: metro_avg_delay_min > 5
        for: 10m
        labels:
          severity: warning
        annotations:
          description: Average delay is above 5 minutes for 10 minutes
      - alert: NoTrainData
        expr: rate(metro_events_ingested_total[5m]) == 0
        for: 5m
        labels:
          severity: critical
        annotations:
          description: No train data ingested in the last 5 minutes
      - alert: OvercrowdedStations
        expr: metro_crowded_stations > 3
        for: 10m
        labels:
          severity: warning
        annotations:
          description: More than 3 stations are crowded for 10 minutes

